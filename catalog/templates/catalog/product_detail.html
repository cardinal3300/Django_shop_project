{% extends 'base.html' %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="card shadow-lg mx-auto" style="max-width: 400px; height: auto; object-fit: contain;">
    {% if product.image %}
    <img src="{{ product.image.url }}"
         class="card-img-top"
         alt="{{ product.name }}"
         style="max-width: 400px; height: auto; object-fit: contain;">
    {% endif %}

    <div class="card-body">
        <h2 class="card-title">{{ product.name }}</h2>
        <p class="card-text">{{ product.description }}</p>

        <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ product.category.name }}</p>
        <p><strong>–¶–µ–Ω–∞:</strong> {{ product.purchase_price }} ‚ÇΩ</p>
        <p><strong>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</strong> {{ product.created_at|date:"d.m.Y H:i" }}</p>
        <p><strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:</strong> {{ product.updated_at|date:"d.m.Y H:i" }}</p>

        <div class="d-flex justify-content-between mt-4">
            <a href="{% url 'catalog:home' %}" class="btn btn-outline-secondary">–ù–∞–∑–∞–¥</a>

            {% if user.is_authenticated %}
                <div class="d-flex gap-2">

                    <!--–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü-->
                    {% if product.owner_id == user.id %}
                        <a href="{% url 'catalog:product_form' product.pk %}" class="btn btn-outline-primary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    {% endif %}

                    <!--–£–¥–∞–ª—è—Ç—å –º–æ–∂–µ—Ç –∏ –≤–ª–∞–¥–µ–ª–µ—Ü –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä-->
                    {% if product.owner_id == user.id or perms.catalog.can_unpublish_product %}
                        <a href="{% url 'catalog:product_confirm_delete' product.pk %}"
                           class="btn btn-outline-danger">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </a>
                    {% endif %}
                </div>
            {% endif %}
        </div>

        <!--–°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –∏ –≤–ª–∞–¥–µ–ª–µ—Ü –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä-->
        {% if perms.catalog.can_unpublish_product %}
            {% if product.status == "published" %}
                <div class="text-center mt-3">
                    <a href="{% url 'catalog:can_unpublish_product' product.pk %}"
                       class="btn btn-outline-warning">
                        üö´ –°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
                    </a>
                </div>
            {% endif %}
        {% endif %}
    </div>
</div>
{% endblock %}